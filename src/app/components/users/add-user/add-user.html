<form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="add-user-form">
  <h2 class="form-title">Add a new user</h2>
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Name</mat-label>
    <input matInput formControlName="name" required autocomplete="off">
    <mat-error *ngIf="userForm.get('name')?.hasError('required')">
  Name is required.
</mat-error>

  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Lastname</mat-label>
    <input matInput formControlName="surname" required autocomplete="off">
    <mat-error *ngIf="userForm.get('surname')?.hasError('required')">
      Lastname is required.
    </mat-error>
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Email</mat-label>
    <input matInput formControlName="email" required type="email" autocomplete="off">
    <mat-error *ngIf="userForm.get('email')?.hasError('required')">
      Email is required.
    </mat-error>
    <mat-error *ngIf="userForm.get('email')?.hasError('email')">
      Enter a valid email adress.
    </mat-error>
  </mat-form-field>

  <div class="permissions-section">
    <label class="perm-label">Permissions (choose at least one):</label>
    <div class="permissions-group">
      <mat-checkbox *ngFor="let perm of permissionsList"
              [value]="perm"
              (change)="onCheckboxChange($event)">
  {{ perm }}
</mat-checkbox>

    </div>
    <div class="permissions-error" *ngIf="userForm.get('permissions')?.invalid && userForm.get('permissions')?.touched">
      Choose at least one permission.
    </div>
  </div>

  <button
  mat-raised-button
  type="submit"
  class="login-button add-user-button"
  [disabled]="userForm.invalid">
  <mat-icon>person_add</mat-icon>
  Add user
</button>

</form>
